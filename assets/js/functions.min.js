!function(a){"use strict";function b(b){b.find(".menu-item-has-children > a").after('<button class="dropdown-toggle" aria-expanded="false">'+snowbirdReaderText.expand+"</button>"),b.find(".current-menu-ancestor > button").addClass("toggle-on"),b.find(".current-menu-ancestor > .sub-menu").addClass("toggled-on"),b.find(".dropdown-toggle").click(function(b){var c=a(this);b.preventDefault(),c.toggleClass("toggle-on"),c.next(".children, .sub-menu").toggleClass("toggled-on"),c.attr("aria-expanded","false"===c.attr("aria-expanded")?"true":"false"),c.html(c.html()===snowbirdReaderText.expand?snowbirdReaderText.collapse:snowbirdReaderText.expand)})}function c(){if(d.hasClass("page")||d.hasClass("single")){var b=a(".entry-content");b.find("img.size-full, img.size-large").each(function(){var b=a(this),c=b.closest("figure"),e=b.offset(),f=e.top,g=b.closest("article").find(".xf__author-bio"),h=g.length?g.offset():0,i=g.length?h.top+(g.height()+20):0,j=new Image;j.src=b.attr("src"),a(j).on("load.snowbird",function(){var a=j.width;f>i?b.hasClass("size-full")&&a>=920?(b.addClass("full-width"),c.addClass("full-width"),c.removeAttr("style")):c.hasClass("wp-caption")&&a>=920&&!d.hasClass("full-content-width")?(c.addClass("caption-big"),c.removeAttr("style")):a>=920&&!d.hasClass("full-content-width")&&b.addClass("size-big"):(b.removeClass("size-big"),b.removeClass("full-width"),c.removeClass("caption-big"),c.removeClass("full-width"))})}),b.find("figure, .gallery, .embed-wrappar").each(function(){var b=a(this),c=b.offset(),d=c.top,e=b.closest("article").find(".xf__author-bio"),f=e.length?e.offset():0,g=e.length?f.top+(e.height()+20):0;g>d&&490<=b.innerWidth()?b.hasClass("gallery")?b.css("clear","both").css("margin-right",0):b.hasClass("embed-wrappar")?b.css("margin-right","300px"):b.hasClass("wp-caption")&&b.css("margin-right","300px"):b.removeAttr("style")})}}var d,e,f,g=50,h=0,i={tError:"",cursor:"",titleSrc:function(a){var b=a.el.attr("title");return"undefined"!=typeof b&&b!==!1?b:a.img.attr("alt")}},j={enabled:!0,navigateByImgClick:!0,preload:[0,1]},k={beforeOpen:function(){this.st.mainClass="mfp-image-popup pop-in-out mfp-with-zoom"},imageLoadComplete:function(){var a=this;setTimeout(function(){a.wrap.addClass("mfp-image-loaded")},16)},updateStatus:function(b){"error"===b.status&&a.magnificPopup.instance.close()},change:function(){this.wrap.removeClass("mfp-image-loaded")},close:function(){this.wrap.removeClass("mfp-image-loaded")},afterClose:function(){}},l={enabled:!0,duration:300,opener:function(a){return a.is("img")?a:a.find("img")}};a(document).ready(function(){d=a(document.body),e=a(".entry-content"),a(".snowbird-popup").find(".entry-content").find("a[href]").filter(function(){return/(jpg|jpeg|gif|png)$/.test(a(this).attr("href"))}).magnificPopup({type:"image",tLoading:"",closeBtnInside:!1,removalDelay:100,image:i,gallery:j,zoom:l,callbacks:k}),e.fitVids();var m="xf__toggle-on";a(".xf__toggle").on("click.snowbird",function(){d.addClass(m)}),a(".xf__close").on("click.snowbird",function(){d.removeClass(m)}),a(".content-area").on("click.snowbird",function(){d.removeClass(m)}),a(".xf__top").on("click.snowbird",function(b){b.preventDefault(),a(".xf__sidebar").scrollTop(0)}),a(".xf__sidebar").perfectScrollbar({wheelSpeed:2,wheelPropagation:!0}),a(window).on("resize.snowbird",function(){clearTimeout(f),f=setTimeout(c,300)}).scroll(function(){var b=a(this).scrollTop();Math.abs(h-b)<=g||(a(".xf__toggle").toggleClass("xf__toggle-show",h>b),h=b)}),c(),b(a(".main-navigation"))}).on("customize-preview-menu-refreshed.snowbird",function(c,d){"primary"===d.wpNavMenuArgs.theme_location&&(b(d.newContainer),d.oldContainer.find(".dropdown-toggle.toggle-on").each(function(){var b=a(this).parent().prop("id");a(d.newContainer).find("#"+b+" > .dropdown-toggle").triggerHandler("click")}))})}(jQuery);